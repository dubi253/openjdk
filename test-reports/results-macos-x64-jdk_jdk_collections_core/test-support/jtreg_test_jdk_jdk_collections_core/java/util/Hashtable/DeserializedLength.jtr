#Test Results (version 2)
#Fri Mar 01 17:00:34 UTC 2024
#-----testdescription-----
$file=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java
$root=/Users/runner/work/openjdk/openjdk/test/jdk
keywords=bug8068427
modules=java.base/java.util\:open
run=ASSUMED_ACTION main DeserializedLength\n
source=DeserializedLength.java
title=Hashtable deserialization reconstitutes table with wrong capacity

#-----environment-----

#-----testresult-----
description=file\:/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java
elapsed=62 0\:00\:00.062
end=Fri Mar 01 17\:00\:34 UTC 2024
environment=regtest
execStatus=Passed. Execution successful
harnessLoaderMode=Classpath Loader
harnessVariety=Full Bundle
hostname=192.168.64.23
javatestOS=Mac OS X 13.6.4 (x86_64)
javatestVersion=6.0-ea+b24-2024-02-28-${BUILT_FROM_COMMIT}
jtregVersion=jtreg 7.3.1 dev 0
modules=java.base/java.util\:open
script=com.sun.javatest.regtest.exec.RegressionScript
sections=script_messages build compile main
start=Fri Mar 01 17\:00\:34 UTC 2024
test=java/util/Hashtable/DeserializedLength.java
testJDK=/Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home
testJDK_OS=[name\:Mac OS X,arch\:x86_64,version\:13.6.4,family\:mac,simple_arch\:x64,simple_version\:13.6,processors\:4,maxMemory\:15032385536,maxSwap\:0]
testJDK_os.arch=x86_64
testJDK_os.name=Mac OS X
testJDK_os.version=13.6.4
totalTime=64
user.name=runner
work=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/java/util/Hashtable

#section:script_messages
----------messages:(4/341)----------
JDK under test: /Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home
openjdk version "23-internal" 2024-09-17
OpenJDK Runtime Environment (build 23-internal-dubi253-86f0ab9b59b661eea77a98be8a17942cdfcbf68b)
OpenJDK 64-Bit Server VM (build 23-internal-dubi253-86f0ab9b59b661eea77a98be8a17942cdfcbf68b, mixed mode, sharing)

#section:build
----------messages:(7/225)----------
command: build DeserializedLength
reason: Named class compiled on demand
started: Fri Mar 01 17:00:34 UTC 2024
Test directory:
  compile: DeserializedLength
finished: Fri Mar 01 17:00:34 UTC 2024
elapsed time (seconds): 0.02
result: Passed. Build successful

#section:compile
----------messages:(8/346)----------
command: compile /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java
reason: .class file out of date or does not exist
started: Fri Mar 01 17:00:34 UTC 2024
Additional options from @modules: --add-modules java.base
Mode: agentvm
Agent id: 2
finished: Fri Mar 01 17:00:34 UTC 2024
elapsed time (seconds): 0.019
----------configuration:(11/741)----------
Boot Layer (javac runtime environment)
  class path: /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/javatest.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/jtreg.jar 
  patch:      java.base /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/patches/java.base

javac compilation environment
  add modules: java.base
  source path: /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable
  class path:  /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable
               /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d

----------rerun:(35/3427)*----------
cd /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/scratch/1 && \\
HOME=/Users/runner \\
LANG=en_US.UTF-8 \\
LC_ALL=C \\
LC_CTYPE=en_US.UTF-8 \\
PATH=/bin:/usr/bin:/usr/sbin \\
TEST_IMAGE_DIR=/Users/runner/work/openjdk/openjdk/bundles/tests \\
    /Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home/bin/javac \\
        -J-Xmx768m \\
        -J-XX:MaxRAMPercentage=12.5 \\
        -J-Dtest.boot.jdk=/Users/runner/work/openjdk/openjdk/bootjdk/jdk \\
        -J-Djava.io.tmpdir=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/tmp \\
        -J-ea \\
        -J-esa \\
        -J-Dtest.vm.opts='-Xmx768m -XX:MaxRAMPercentage=12.5 -Dtest.boot.jdk=/Users/runner/work/openjdk/openjdk/bootjdk/jdk -Djava.io.tmpdir=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/tmp -ea -esa' \\
        -J-Dtest.tool.vm.opts='-J-Xmx768m -J-XX:MaxRAMPercentage=12.5 -J-Dtest.boot.jdk=/Users/runner/work/openjdk/openjdk/bootjdk/jdk -J-Djava.io.tmpdir=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/tmp -J-ea -J-esa' \\
        -J-Dtest.compiler.opts= \\
        -J-Dtest.java.opts=-XX:-CreateCoredumpOnCrash \\
        -J-Dtest.jdk=/Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home \\
        -J-Dcompile.jdk=/Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home \\
        -J-Dtest.timeout.factor=4.0 \\
        -J-Dtest.nativepath=/Users/runner/work/openjdk/openjdk/bundles/tests/jdk/jtreg/native \\
        -J-Dtest.root=/Users/runner/work/openjdk/openjdk/test/jdk \\
        -J-Dtest.name=java/util/Hashtable/DeserializedLength.java \\
        -J-Dtest.file=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java \\
        -J-Dtest.src=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -J-Dtest.src.path=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -J-Dtest.classes=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d \\
        -J-Dtest.class.path=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d \\
        -J-Dtest.class.path.prefix=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d:/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -J-Dtest.modules=java.base/java.util:open \\
        --add-modules java.base \\
        -d /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d \\
        -sourcepath /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -classpath /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable:/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java
result: Passed. Compilation successful

#section:main
----------messages:(8/309)----------
command: main DeserializedLength
reason: Assumed action based on file name: run main DeserializedLength 
started: Fri Mar 01 17:00:34 UTC 2024
Mode: agentvm
Agent id: 6
Additional opens to unnamed modules from @modules: java.base/java.util
finished: Fri Mar 01 17:00:34 UTC 2024
elapsed time (seconds): 0.042
----------configuration:(14/1013)----------
Boot Layer
  class path: /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/javatest.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/jtreg.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/junit-platform-console-standalone-1.9.2.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/testng-7.3.0.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/guice-5.1.0.jar 
              /Users/runner/work/openjdk/openjdk/jtreg/installed/lib/jcommander-1.82.jar 
  patch:      java.base /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/patches/java.base

Test Layer
  add opens:  java.base/java.util ALL-UNNAMED
  class path: /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d 
              /Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable 

----------rerun:(27/2858)*----------
cd /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/scratch/1 && \\
HOME=/Users/runner \\
LANG=en_US.UTF-8 \\
LC_ALL=C \\
LC_CTYPE=en_US.UTF-8 \\
PATH=/bin:/usr/bin:/usr/sbin \\
TEST_IMAGE_DIR=/Users/runner/work/openjdk/openjdk/bundles/tests \\
    /Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home/bin/java \\
        -Dtest.vm.opts='-Xmx768m -XX:MaxRAMPercentage=12.5 -Dtest.boot.jdk=/Users/runner/work/openjdk/openjdk/bootjdk/jdk -Djava.io.tmpdir=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/tmp -ea -esa' \\
        -Dtest.tool.vm.opts='-J-Xmx768m -J-XX:MaxRAMPercentage=12.5 -J-Dtest.boot.jdk=/Users/runner/work/openjdk/openjdk/bootjdk/jdk -J-Djava.io.tmpdir=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/tmp -J-ea -J-esa' \\
        -Dtest.compiler.opts= \\
        -Dtest.java.opts=-XX:-CreateCoredumpOnCrash \\
        -Dtest.jdk=/Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home \\
        -Dcompile.jdk=/Users/runner/work/openjdk/openjdk/bundles/jdk/jdk-23.jdk/Contents/Home \\
        -Dtest.timeout.factor=4.0 \\
        -Dtest.nativepath=/Users/runner/work/openjdk/openjdk/bundles/tests/jdk/jtreg/native \\
        -Dtest.root=/Users/runner/work/openjdk/openjdk/test/jdk \\
        -Dtest.name=java/util/Hashtable/DeserializedLength.java \\
        -Dtest.file=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable/DeserializedLength.java \\
        -Dtest.src=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -Dtest.src.path=/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -Dtest.classes=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d \\
        -Dtest.class.path=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d \\
        -Dtest.class.path.prefix=/Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d:/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable \\
        -Dtest.modules=java.base/java.util:open \\
        -classpath /Users/runner/work/openjdk/openjdk/build/run-test-prebuilt/test-support/jtreg_test_jdk_jdk_collections_core/classes/0/java/util/Hashtable/DeserializedLength.d:/Users/runner/work/openjdk/openjdk/test/jdk/java/util/Hashtable:/Users/runner/work/openjdk/openjdk/jtreg/installed/lib/javatest.jar:/Users/runner/work/openjdk/openjdk/jtreg/installed/lib/jtreg.jar \\
        DeserializedLength
----------System.out:(24/1166)----------
Results:
                 ser.  deser.
   size  load  lentgh  length       valid range ok?
------- ----- ------- ------- ----------------- ------
     10  0.25      63      45      41...     82 OK
     10  0.50      31      23      21...     42 OK
     10  0.75      15      15      14...     28 OK
     10  1.00      15      13      11...     22 OK
     10  2.50       7       7       5...     10 OK
     50  0.25     255     211     201...    402 OK
     50  0.50     127     107     101...    202 OK
     50  0.75     127      71      67...    134 OK
     50  1.00      63      55      51...    102 OK
     50  2.50      31      23      21...     42 OK
    500  0.25    2047    2047    2001...   4002 OK
    500  0.50    1023    1023    1001...   2002 OK
    500  0.75    1023     703     667...   1334 OK
    500  1.00     511     511     501...   1002 OK
    500  2.50     255     213     201...    402 OK
   5000  0.25   32767   21003   20001...  40002 OK
   5000  0.50   16383   10503   10001...  20002 OK
   5000  0.75    8191    7003    6667...  13334 OK
   5000  1.00    8191    5253    5001...  10002 OK
   5000  2.50    2047    2047    2001...   4002 OK
----------System.err:(3/35)----------

JavaTest Message: Test complete.

result: Passed. Execution successful


test result: Passed. Execution successful
